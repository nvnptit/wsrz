const resp = {}, obj = JSON.parse("undefined" != typeof $response && $response.body || null), ua = $request.headers["User-Agent"] || $request.headers["user-agent"], list = { HTTPBot: { name: "rc_lifetime", id: "com.behindtechlines.HTTPBot.prounlock" }, VSCO: { name: "membership", id: "com.circles.fin.premium.yearly" }, "1Blocker": { name: "premium", id: "blocker.ios.subscription.yearly" } }, data = { expires_date: "2099-02-18T07:52:54Z", original_purchase_date: "2020-02-11T07:52:55Z", purchase_date: "2020-02-11T07:52:54Z" }; if ("undefined" == typeof $response) delete $request.headers["x-revenuecat-etag"], delete $request.headers["X-RevenueCat-ETag"], resp.headers = $request.headers; else if (obj && obj.subscriber) { for (let e in obj.subscriber.subscriptions = obj.subscriber.subscriptions || {}, obj.subscriber.entitlement = obj.subscriber.entitlement || {}, list) if (RegExp(`^${e}`, "i").test(ua)) { obj.subscriber.subscriptions[list[e].id] = data, obj.subscriber.entitlements[list[e].name] = JSON.parse(JSON.stringify(data)), obj.subscriber.entitlements[list[e].name].product_identifier = list[e].id; break } resp.body = JSON.stringify(obj) } $done(resp);